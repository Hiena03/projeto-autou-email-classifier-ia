<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROJETO AUTOU - Classificador de E-mail com IA</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìß</text></svg>">
</head>
<body>
    <div class="container">
        <header class="app-header">
            <h1>üìß Classificador de E-mails com IA</h1>
            <p class="subtitle">Automatize a classifica√ß√£o de e-mails e receba sugest√µes de respostas inteligentes</p>
        </header>

        <main class="main-content">
            <form id="emailForm" class="email-form">
                <div class="form-group">
                    <label for="emailTextInput">
                        <span class="label-icon">‚úçÔ∏è</span>
                        Cole o conte√∫do do e-mail aqui:
                    </label>
                    <textarea 
                        id="emailTextInput" 
                        name="email_text" 
                        rows="8" 
                        placeholder="Exemplo: Ol√° equipe, preciso de ajuda com meu extrato banc√°rio de novembro. N√£o consigo acessar o sistema..."
                        maxlength="10000"
                    ></textarea>
                    <small class="char-counter">
                        <span id="charCount">0</span>/10.000 caracteres
                    </small>
                </div>

                <div class="or-separator">
                    <span>OU</span>
                </div>

                <div class="form-group">
                    <label for="emailFileInput">
                        <span class="label-icon">üìé</span>
                        Fa√ßa upload de um arquivo (.txt ou .pdf):
                    </label>
                    <div class="file-input-wrapper">
                        <input type="file" id="emailFileInput" name="email_file" accept=".txt,.pdf">
                        <div class="file-input-display">
                            <span class="file-placeholder">Nenhum arquivo selecionado</span>
                            <button type="button" class="file-button">Escolher Arquivo</button>
                        </div>
                    </div>
                    <small class="file-info">Tamanho m√°ximo: 10MB</small>
                </div>

                <button type="submit" id="processButton" class="process-button">
                    <span class="button-text">üöÄ Processar E-mail</span>
                </button>
            </form>

            <!-- Mensagens de Feedback -->
            <div id="loadingIndicator" class="feedback-message loading" style="display: none;">
                <div class="spinner"></div>
                <p>Analisando e processando seu e-mail...</p>
            </div>
            
            <div id="errorMessage" class="feedback-message error" style="display: none;"></div>
            <div id="successMessage" class="feedback-message success" style="display: none;"></div>
            
            <!-- √Årea de Resultados -->
            <div id="results" class="results-area" style="display: none;">
                <h2>üìä Resultados da An√°lise</h2>
                
                <div class="result-card">
                    <h3>üè∑Ô∏è Classifica√ß√£o</h3>
                    <div class="classification-result">
                        <span id="classification_result" class="classification-badge"></span>
                    </div>
                </div>

                <div class="result-card">
                    <h3>ü§ñ Resposta Autom√°tica Sugerida</h3>
                    <div class="reply-container">
                        <textarea id="auto_reply_result" rows="6" readonly placeholder="A resposta ser√° gerada aqui..."></textarea>
                        <div class="reply-actions">
                            <button type="button" onclick="copyToClipboard()" class="copy-button">
                                üìã Copiar Resposta
                            </button>
                            <button type="button" onclick="clearResults()" class="clear-button">
                                ÔøΩÔøΩÔ∏è Limpar Resultados
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Informa√ß√µes Adicionais (Novo) -->
                <div class="result-card additional-info" style="display: none;">
                    <h3>üîç Informa√ß√µes do Processamento</h3>
                    <div class="info-grid">
                        <div class="info-item">
                            <strong>Texto Processado (NLP):</strong>
                            <p id="processed_text_result" class="processed-text"></p>
                        </div>
                        <div class="info-item">
                            <strong>Caracteres Analisados:</strong>
                            <p id="char_count_result"></p>
                        </div>
                    </div>
                    <button type="button" onclick="toggleAdditionalInfo()" class="toggle-info-button">
                        üëÅÔ∏è Mostrar Detalhes T√©cnicos
                    </button>
                </div>
            </div>
        </main>

        <footer class="app-footer">
            <p>üí° Desenvolvido com Flask + OpenAI GPT-3.5-turbo | 
               <a href="/health" >Status da API</a>
            </p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>